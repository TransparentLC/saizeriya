<!doctype html><html lang="zh"><head><meta charset="utf-8"><link href="./vite.svg" rel="icon" type="image/svg+xml"><meta content="TransparentLC" name="author"><meta content="width=device-width,initial-scale=1" name="viewport"><title>萨莉亚随机点餐</title><script crossorigin src="./assets/index-ecc14325.js" type="module"></script><link href="./assets/index-0a3afde3.css" rel="stylesheet"></head><body><div v-scope><h1 id="title" style="text-align:center;font-size:4rem">萨莉亚！<br>随机点餐</h1><div style="margin:2rem 0" class="nes-container with-title" v-show="!showResult"><h2 class="title">设定</h2><div style="display:flex;margin-bottom:1rem" class="nes-field is-inline"><label style="margin-bottom:0" class="nowrap">预算</label><div style="display:flex;flex-grow:1" class="nes-field is-inline"><input class="nes-input is-error" v-model="budgetMin" type="number" min="1" placeholder="下限"> <span style="margin:0 .5rem">-</span> <input class="is-success nes-input" v-model="budgetMax" type="number" min="1" placeholder="上限"></div></div><button class="nes-btn" style="display:block;width:100%;margin:1rem 0" @click="autoSetBudget">设定为平均的 +/- 20%</button><div style="display:flex"><span style="flex-grow:1">畅饮</span> <label style="margin-left:1rem"><input class="nes-radio" v-model="drinkProbability" type="radio" :value="1" name="drink-probability"><span>点</span></label> <label style="margin-left:1rem"><input class="nes-radio" v-model="drinkProbability" type="radio" :value="0" name="drink-probability"><span>不点</span></label> <label style="margin-left:1rem"><input class="nes-radio" v-model="drinkProbability" type="radio" :value=".5" name="drink-probability"><span title="50%概率">随机</span></label></div><label><input class="nes-checkbox" v-model="drinkMix" type="checkbox"> <span>“自由搭配的乐趣！” <a href="https://saizeriya.oss-cn-guangzhou.aliyuncs.com/upload/portal/20230109/202301091654376284.jpg" rel="noreferrer noopener" target="_blank">(?)</a></span></label><details><summary class="nes-pointer">菜品筛选</summary><div class="col-1-2"><div style="display:flex" v-for="item in categoryFilter"><span style="flex-grow:1">{{ item.category }}</span> <label style="margin-left:1rem"><input class="nes-radio" v-model="item.enabled" type="radio" :value="true" :name="`category-filter-${item.category}`"><span>Yes</span></label> <label style="margin-left:1rem"><input class="nes-radio" v-model="item.enabled" type="radio" :value="false" :name="`category-filter-${item.category}`"><span>No</span></label></div></div><div class="col-2"><button class="nes-btn" style="display:block;width:100%;margin:0" @click="categoryFilter.forEach(e => e.enabled = true)">全选</button> <button class="nes-btn" style="display:block;width:100%;margin:0" @click="categoryFilter.forEach(e => e.enabled = !e.enabled)">反选</button></div><hr><div class="nes-field"><label>黑名单（不会出现在点餐结果中）</label> <input class="nes-input" v-model="blacklistExpr" placeholder="输入以空格分隔的菜品编码"></div></details><button class="nes-btn is-primary" style="display:block;width:100%;margin:1rem 0;margin-bottom:0" :title="`设定的预算范围已经超过了所有菜品的价格（${menuPriceTotal}）`" disabled v-if="Math.min(budgetMin, budgetMax) > menuPriceTotal">吃这么多，你是幽幽子吗～<span class="nowrap">( ｡╹ω╹｡ )</span></button> <button class="nes-btn is-primary" style="display:block;width:100%;margin:1rem 0;margin-bottom:0" :title="`设定的预算范围低于最便宜的菜品的价格（${menuPriceMin}）`" disabled v-else-if="budgetMin && budgetMax && Math.max(budgetMin, budgetMax) < menuPriceMin">这么点钱能吃啥啊…<span class="nowrap">_φ(･ω･` )</span></button> <button class="nes-btn is-primary" style="display:block;width:100%;margin:1rem 0;margin-bottom:0" @click="rollMenu" v-else>Roll 一份菜单！</button></div><div style="margin:2rem 0" v-show="showResult"><div id="menu-result"><h2 style="text-align:center">你点了 {{ result.length }} 份菜</h2><div style="display:flex;align-items:center;margin:1rem 0" class="is-rounded nes-container" :key="item.id" v-for="item in result"><div style="flex-grow:1">{{ item.id }} {{ item.name }}<br><span class="is-success nes-text">{{ formatPrice(item.price) }}</span> <span class="nes-text is-disabled">{{ item.category }}</span></div><picture style="width:30%;flex-shrink:0;margin-left:1rem"><source :srcset="img[1]" :type="img[0]" v-for="img in Object.entries(item.image)"><img :src="item.image['image/jpeg']" style="width:100%;height:100%;object-fit:cover;border-radius:.25rem"></picture></div><div style="margin:1rem 0"><span v-if="result.find(e => e.id === 1888)">畅饮推荐：{{ drinkRecommendation }}<br></span>总消费：<span class="is-success nes-text">{{ formatPrice(result.map(e => e.price).reduce((acc, cur) => acc += cur, 0)) }}</span></div></div><button class="nes-btn is-success" style="display:block;width:100%;margin:.5rem 0" @click="rollMenu">再 Roll 一次！</button><div class="col-1-2"><button class="nes-btn" style="display:block;width:100%;margin:.5rem 0" @click="showResult = false">返回设定</button> <button class="nes-btn is-warning" style="display:block;width:100%;margin:.5rem 0" @click="saveMenu">截图分享</button></div></div><div style="text-align:center;line-height:1.5rem" id="footer"><small>© 2023 ✨小透明・宸✨ <a href="https://github.com/TransparentLC/saizeriya" rel="noreferrer noopener" target="_blank" id="source">源代码</a><br>菜式名称和图片的相关权利归<a href="https://gz-saizeriya.com.cn/" rel="noreferrer noopener" target="_blank">广州萨莉亚餐饮有限公司</a>所有，与本网页没有关联。</small></div><dialog class="is-rounded nes-dialog" id="dialog-image" style="text-align:center;line-height:1.5rem"><form method="dialog"><img :src="resultImage" style="display:block;margin:0 auto;max-height:60vh"> <small>如果点击“保存”没有反应<br>请尝试长按/右键图片进行另存为操作(　ﾟ 3ﾟ)</small><menu style="padding:0;text-align:center"><a :href="resultImage" class="nes-btn is-primary" download>保存</a> <button class="nes-btn">关闭</button></menu></form></dialog></div></body></html>